# -*- coding: utf-8 mode: shell-script -*-
# $Id: 02-neon_mpi.test 3344 2007-10-13 13:38:03Z acastro $

Test       : Time propagation
Author     : Xavier
Date       : 31.10.06
Arch       : Linux lascar 2.6.21-2-amd64 #1 SMP Wed Jul 11 05:38:29 UTC 2007 x86_64 GNU/Linux
Release    : 3.1.0pre1
Programs   : octopus_mpi; octopus
TestGroups : long-run
Enabled    : Yes

#This test checks the time propagation

# ground state
Processors : 4
Input      : 22-time_propagation.01-gs.inp
Match ; Initial Energy   ; sed -n '/^Energy/{n\;p\;}' static/info ; \s*Total\s*=\s*-37.925

# time propagation, parallel in domains
Processors : 4
Input      : 22-time_propagation.02-td_domains.inp
Match ; Energy [step 5]  ; tail -6 td.general/energy | head -1 ; \s*-3.7925
Match ; Energy [step 10] ; tail -1 td.general/energy ; \s*-3.7925

# combined parallelization
Processors : 4
Input      : 22-time_propagation.03-td_domains_states.inp
Match ; Energy [step 5]  ; tail -6 td.general/energy | head -1 ; \s*-3.7925
Match ; Energy [step 10] ; tail -1 td.general/energy ; \s*-3.7925

#moving the ions
Processors : 4
Input      : 22-time_propagation.04-td_md.inp
Match ; Energy [step 1]  ; tail -11 td.general/energy | head -1 ; \s*-3.7911
Match ; Energy [step 5]  ; tail -6  td.general/energy | head -1 ; \s*-3.7911
Match ; Energy [step 10] ; tail -1  td.general/energy ; \s*-3.7911

#fast ehrenfest molecular dynamics
Processors : 4
Input      : 22-time_propagation.05-td_fast_md.inp
Match ; Energy [step 1]  ; tail -21 td.general/energy | head -1 ; \s*-3.7911
Match ; Energy [step 5]  ; tail -16 td.general/energy | head -1 ; \s*-3.7911
Match ; Energy [step 10] ; tail -11 td.general/energy | head -1 ; \s*-3.7910
Match ; Energy [step 15] ; tail -6 td.general/energy  | head -1 ; \s*-3.7910
Match ; Energy [step 20] ; tail -1 td.general/energy  | head -1 ; \s*-3.7910

Match ; Forces [step 1]  ; tail -21 td.general/coordinates | head -1 | cut -b 1610-1630; \s*-1.460
Match ; Forces [step 5]  ; tail -16 td.general/coordinates | head -1 | cut -b 1610-1630; \s*-8.024
Match ; Forces [step 10] ; tail -11 td.general/coordinates | head -1 | cut -b 1610-1630; \s*-9.729
Match ; Forces [step 15] ; tail -6  td.general/coordinates | head -1 | cut -b 1610-1630; \s*-1.079
Match ; Forces [step 20] ; tail -1  td.general/coordinates | head -1 | cut -b 1610-1630; \s*-9.802
