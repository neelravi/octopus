# -*- coding: utf-8 mode: shell-script -*-
# $Id$

Test       : Eigensolver
Programs   : octopus; octopus_mpi
TestGroups : short-run
Enabled    : Yes

# This test checks the eigensolver lobpcg, cg, cg_new, plan, evolution and rmmdiis with a simple
# SiH4.

Input: 20-eigensolver.01-lobpcg.inp
match ; Eigenvalue  1 ; GREP(static/info, ' 1   --', 13) ; -13.449024
match ; Eigenvalue  2 ; GREP(static/info, ' 2   --', 13) ;  -8.455376
match ; Eigenvalue  3 ; GREP(static/info, ' 3   --', 13) ;  -8.455376
match ; Eigenvalue  4 ; GREP(static/info, ' 4   --', 13) ;  -8.419341

Input: 20-eigensolver.02-cg.inp
match ; Eigenvalue  1 ; GREP(static/info, ' 1   --', 13) ; -13.449028
match ; Eigenvalue  2 ; GREP(static/info, ' 2   --', 13) ;  -8.455385
match ; Eigenvalue  3 ; GREP(static/info, ' 3   --', 13) ;  -8.455385
match ; Eigenvalue  4 ; GREP(static/info, ' 4   --', 13) ;  -8.419351

Input: 20-eigensolver.03-cg_new.inp
match ; Eigenvalue  1 ; GREP(static/info, ' 1   --', 13) ; -13.449038
match ; Eigenvalue  2 ; GREP(static/info, ' 2   --', 13) ;  -8.455388
match ; Eigenvalue  3 ; GREP(static/info, ' 3   --', 13) ;  -8.455388
match ; Eigenvalue  4 ; GREP(static/info, ' 4   --', 13) ;  -8.419354 

Input: 20-eigensolver.04-plan.inp
match ; Eigenvalue  1 ; GREP(static/info, ' 1   --', 13) ; -13.449048
match ; Eigenvalue  2 ; GREP(static/info, ' 2   --', 13) ;  -8.455424
match ; Eigenvalue  3 ; GREP(static/info, ' 3   --', 13) ;  -8.455419 
match ; Eigenvalue  4 ; GREP(static/info, ' 4   --', 13) ;  -8.419384

# In this case, the numbers are slightly different because the input
# file sets a high convergence criterion. If allowed to proceed further,
# the algorithm does converge to the correct numbers.
Input: 20-eigensolver.05-evolution.inp
match ; Eigenvalue  1 ; GREP(static/info, ' 1   --', 13) ; -13.662216
match ; Eigenvalue  2 ; GREP(static/info, ' 2   --', 13) ;  -8.729765
match ; Eigenvalue  3 ; GREP(static/info, ' 3   --', 13) ;  -8.729765
match ; Eigenvalue  4 ; GREP(static/info, ' 4   --', 13) ;  -8.693304

Processors : 4
Input: 20-eigensolver.06-rmmdiis.inp
match ; Eigenvalue  1 ; GREP(static/info, ' 1   --', 13) ; -13.449066
match ; Eigenvalue  2 ; GREP(static/info, ' 2   --', 13) ;  -8.455424
match ; Eigenvalue  3 ; GREP(static/info, ' 3   --', 13) ;  -8.455424
match ; Eigenvalue  4 ; GREP(static/info, ' 4   --', 13) ;  -8.419385
